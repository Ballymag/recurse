<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculates recursion information from the trajectory for specific locations — getRecursionsAtLocations • recurse</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<meta property="og:title" content="Calculates recursion information from the trajectory for specific locations — getRecursionsAtLocations" />

<meta property="og:description" content="A circle of radius R is drawn around each specified location. The number of
revisits is calculated as the number of segments of the trajectory passing through that circle." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">recurse</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/recurse.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculates recursion information from the trajectory for specific locations</h1>
    </div>

    
    <p>A circle of radius R is drawn around each specified location. The number of
revisits is calculated as the number of segments of the trajectory passing through that circle.</p>
    

    <pre class="usage"><span class='fu'>getRecursionsAtLocations</span>(<span class='no'>x</span>, <span class='no'>locations</span>, <span class='no'>radius</span>, <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>timeunits</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"hours"</span>, <span class='st'>"secs"</span>, <span class='st'>"mins"</span>, <span class='st'>"days"</span>), <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>getRecursionsAtLocations</span>(<span class='no'>x</span>, <span class='no'>locations</span>, <span class='no'>radius</span>,
  <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>timeunits</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"hours"</span>, <span class='st'>"secs"</span>, <span class='st'>"mins"</span>, <span class='st'>"days"</span>),
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># S3 method for Move</span>
<span class='fu'>getRecursionsAtLocations</span>(<span class='no'>x</span>, <span class='no'>locations</span>, <span class='no'>radius</span>, <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>timeunits</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"hours"</span>, <span class='st'>"secs"</span>, <span class='st'>"mins"</span>, <span class='st'>"days"</span>), <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># S3 method for MoveStack</span>
<span class='fu'>getRecursionsAtLocations</span>(<span class='no'>x</span>, <span class='no'>locations</span>, <span class='no'>radius</span>,
  <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>timeunits</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"hours"</span>, <span class='st'>"secs"</span>, <span class='st'>"mins"</span>, <span class='st'>"days"</span>),
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Either a data frame, <a href='http://www.rdocumentation.org/packages/move/topics/Move-class'>Move-class</a>, or <a href='http://www.rdocumentation.org/packages/move/topics/MoveStack-class'>MoveStack</a> object. For a data frame, 
the trajectory data with four columns (the x-coordinate, the y-coordinate, the datetime, and the animal id).</p></td>
    </tr>
    <tr>
      <th>locations</th>
      <td><p>A data frame with x and y locations at which to calculate the recursions.</p></td>
    </tr>
    <tr>
      <th>radius</th>
      <td><p>numeric radius to use in units of the (x,y) location data to detect recursions.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>a time difference (in units <code>timeunits</code>) to ignore excursions outside the radius. Defaults to 0.</p></td>
    </tr>
    <tr>
      <th>timeunits</th>
      <td><p>character string specifying units to calculate time differences in for the time spans inside the radius and since the 
visit in <code>revisitStats</code>. Defaults to hours.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>TRUE</code> to output complete information (can be large for large input data frames) or 
<code>FALSE</code> to output basic information.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with several components, <code>revisits</code> and <code>residenceTime</code>
are vectors of the same length as the <code>x</code> dataframe. <code>revisits</code> is the number of revisits for each 
location, where 1 means that there were 
no revisits, only the initial visit. <code>residenceTime</code> is the total time spent withing the radius. <code>radius</code>
is the specified radius used for all the calculations. <code>timeunits</code> is the specified time units used to specify
timespans.</p>
<p>When <code>verbose = TRUE</code>, additional information 
is also returned, <code>dists</code> and <code>revisitStats</code>. Next, <code>dists</code> gives the distance matrix between
all locations. Finally, <code>revisitStats</code> gives further statistics on each visit. These are calculated 
per location (i.e., no aggregation of nearby points is performed), and give the index and location
of the point of the track at the center of the radius, the radius entrance and exit time of the track for that 
visit, how much time was spent inside the radius, and how long since the last visit (<code>NA</code> for the first visit).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For specified location, a circle of radius R is drawn around that point. This method differs 
from <code><a href='getRecursions.html'>getRecursions</a></code> in that only specified locations are used, rather than all points in the
trajectory.
Then the number of segments of the trajectory passing through that circle is counted. This is
the number of revisits to that location. For each 
revisit, the time spent inside the circle is calculated, as well as the time since the last 
visit (NA for the first visit). In order to calculate the time values, the crossing time of the
radius is calculated by assuming linear movement at a constant speed between the points inside
and outside the circle.
    <strong>Projection.</strong> Consider the projection used. Since segments are counted passing through circles
drawn around points, an equal area projection would ensure similar size comparisons (e.g., <a href='http://www.rdocumentation.org/packages/move/topics/spTransform'>spTransform</a>).</p>
<p>Either single or multiple individuals are supported, but be aware that this function will be slow with
large amounts of data (e.g. millions of points), so consider pre-specifying the locations 
(<code>getRecursionsAtLocations</code>) or use clustering. Multiple individuals are handled via the <code>id</code> column of the 
data.frame or using a <a href='http://www.rdocumentation.org/packages/move/topics/MoveStack-class'>MoveStack</a> object.</p>
    
    <h2 class="hasAnchor" id="methods-by-class-"><a class="anchor" href="#methods-by-class-"></a>Methods (by class)</h2>

    <ul>
<li><p><code>data.frame</code>: Get recursions at specified locations for a data.frame object</p></li>
<li><p><code>Move</code>: Get recursions at specified locations for a <a href='http://www.rdocumentation.org/packages/move/topics/Move-class'>Move-class</a> object</p></li>
<li><p><code>MoveStack</code>: Get recursions at specified locations for a <a href='http://www.rdocumentation.org/packages/move/topics/MoveStack-class'>MoveStack</a> object</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='getRecursions.html'>getRecursions</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>martin</span>)
<span class='no'>locations</span> <span class='kw'>=</span> <span class='fu'>data.frame</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>c</span>(-<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>20</span>), <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5</span>, <span class='fl'>0</span>, <span class='fl'>0</span>))
<span class='no'>revisits</span> <span class='kw'>=</span> <span class='fu'>getRecursionsAtLocations</span>(<span class='no'>martin</span>, <span class='no'>locations</span>, <span class='kw'>radius</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='fu'>plot</span>(<span class='no'>revisits</span>, <span class='no'>locations</span>, <span class='kw'>legendPos</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>10</span>, -<span class='fl'>15</span>),
     <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>pch</span> <span class='kw'>=</span> <span class='fl'>17</span>, <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='fu'>range</span>(<span class='no'>martin</span>$<span class='no'>x</span>), <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='fu'>range</span>(<span class='no'>martin</span>$<span class='no'>y</span>))</div><div class='input'><span class='fu'>points</span>(<span class='no'>martin</span>$<span class='no'>x</span>, <span class='no'>martin</span>$<span class='no'>y</span>, <span class='kw'>pch</span> <span class='kw'>=</span> <span class='st'>"."</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"gray50"</span>)</div><div class='input'><span class='fu'><a href='drawCircle.html'>drawCircle</a></span>(<span class='fl'>10</span>, -<span class='fl'>10</span>, <span class='fl'>1</span>)</div><div class='img'><img src='getRecursionsAtLocations-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#methods-by-class-">Methods (by class)</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Chloe Bracis &lt;cbracis@uw.edu&gt;

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Chloe Bracis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
